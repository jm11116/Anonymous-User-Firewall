# Anonymous-User-Firewall
This is a PHP firewall that can be installed at the top of any web page to block anonymous users. It prevents anyone deliberately blocking JavaScript trackers in their browser from accessing a page, as well as anyone who has disabled cookies and JavaScript in general. This approach presents an alternative to trying to block anonymous users via their IP address, which isn't effective if the unwanted visitors are using VPNs or VPS servers to come into your websites, constantly changing their IPs. The script basically works like this:

The firewall is a two-stage test. The first stage will use PHP's die() function to output a whole bunch of JavaScript code on the page. This JavaScript code will first try to load one of several of the most common tracking scripts around the internet. If it is able to load one of those scripts, it will assume the user has tracking enabled in their browser, and the test can continue. The script will then attempt to set a cookie on the user's computer with JavaScript. If it can do this successfully, it proves that the user has both JavaScript and cookies enabled on their device. The value of the JavaScript cookie is different each time, preventing it from being spoofed. The value that the cookie should contain is stored on the server, and, in stage two of the test, the firewall will attempt to match the two pseudo-cryptographic signatures. If it can, it will assume that the cookie is real and not spoofed, as someone correctly guessing the next random hash is astronomically unlikely.

This version firewall will block crawlers as well as anonymous users, so you may find it useful to just install it on pages that are targets for hackers, such as admin and user-input pages.

A future version of the script will enable logging of unsuccessful attempts to bypass the firewall, allowing you to collect evidence against hackers that you may one day want to take to the police.
